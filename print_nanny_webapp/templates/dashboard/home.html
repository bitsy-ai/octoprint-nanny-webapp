{% extends "vertical_base.html" %}
{% load static %}
{% load crispy_forms_tags %}


{% block title %}User: {{ object.email }}{% endblock %}

{% block content %}
<div class="container-fluid">

{% if object == request.user %}
<!-- Action buttons -->
<div class="row">

  <div class="col-sm-12 col-md-6">
    <div class="card">
      <div class="card-body">
        <h2 class="header-title">API Token</h2>
        <p class="text-muted font-14">
          Your API token is used to connect OctoPrint to Print Nanny. Treat this token like a password; do not share or publish it online. 
          You can regenerate this token in your <a href="{% url 'users:detail' %}">settings.</a>
          </p>
        <form>
            <div class="input-group">
              <input id="token" type="password" class="form-control"
                  value="{{ object.token }}" id="copy-input" readonly>
              <div class="input-group-append" data-password="false">
              <div class="input-group-text">
                  <span class="password-eye"></span>
              </div>
              </div>
              {% comment %} <span class="input-group-btn">

                <button class="btn btn-default" type="button" id="copy-button"
                    data-toggle="token" data-placement="button"
                    title="Copy to Clipboard">
                  Copy
                </button>
              </span> {% endcomment %}
            </div>
          </form>
      </div>
    </div> 
  </div>

  <div class="col-sm-12 col-md-6">
    <div class="card">
      <div class="card-body">
          <h2 class="header-title">Printer Status</h2>

          {% if object.printerprofile_set.count == 0 %}
            <p class="text-muted font-14">OctoPrint Disconnected</p>
            <p>Hey! Your OctoPrint installtion could not be detected. </p>
            <p>Is this your first time using Print Nanny? Follow these this guide to get setup: </p>

          {% else %}
          {% endif %}
      </div>
    </div>
  </div>

</div>

<div class="row">

  <div class="col-12">
    <div class="card">
      <div class="card-body">
          <h2 class="header-title">
            Recent Alerts
          </h2>
            <p class="text-muted font-14">
              You'll also receive email notifications at <strong>{{ object.email }}</strong>.
            </p>

          {% if object.alertmessage_set.count == 0 %}
          <p>Need help getting started? Run <a href="{% url 'dashboard:demo' %}">the demo</a> to see what Print Nanny can do. </p>
          {% else %}
          {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="row">

  <div class="col-12">
    <div class="card">
      <div class="card-body">
          <h2 class="header-title">
            Upload Timelapse Video
          </h2>
            <p class="text-muted font-14">
              Test Print Nanny's detection algorithm against any timelapse video.
            </p>

            <!-- File Upload -->
            <form enctype="multipart/form-data" method="post">
              {% csrf_token %}
              {{ form|crispy }}
              <button class="btn btn-primary" type="submit">Analyze Video</button>
            </form>
      </div>
    </div>
  </div>
</div>

<!-- End Action buttons -->
{% endif %}


</div>

<!-- plugin js -->
<script src="{% static 'js/vendor/dropzone.min.js' %}"></script>
<!-- init js -->
<script src="{% static 'js/ui/component.fileupload.js' %}"></script>

{% endblock content %}

